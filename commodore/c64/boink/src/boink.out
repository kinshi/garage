00001  0000              ;=================================
00002  0000              ;64 BOINK!
00003  0000              ;(C) 1986 STEVE GOLDSMITH
00004  0000              ;ALL RIGHTS RESERVED
00005  0000              ;USE COMMODORE'S MACRO ASSEMBLER
00006  0000              ;TO ASSEMBLE
00007  0000              ;=================================
00008  0000              ;
00009  0000              IRQVEC = $0314         ;OS IRQ INTERRUPT VECTOR
00010  0000              VIC2   = $D000         ;VIC2 CHIP
00011  0000              SPRPTR = $07F8         ;SPRITE POINTER
00012  0000              SID    = $D400         ;SOUND CHIP
00013  0000              PRINT  = $FFD2         ;OUTPUT A CHARACTER
00014  0000              *      = $0900
00015  0900              ;
00016  0900              ;INITILIZE SPRITE, IRQ, AND PRINT MESSAGE
00017  0900              ;
00018  0900  A9 05       LDA    #$05
00019  0902  8D DE 0A    STA    TIMER           ;INIT ROTATION TIMER
00020  0905  A9 05       LDA    #$05
00021  0907  8D E3 0A    STA    STIMER          ;INIT SOUND EFFECT TIMER
00022  090A  A9 00       LDA    #$00
00023  090C  8D E0 0A    STA    XDIR            ;INIT X DIR
00024  090F  8D E1 0A    STA    YDIR            ;INIT Y DIR
00025  0912  8D E4 0A    STA    COLOR           ;INIT REFLECTION COLOR
00026  0915  8D E2 0A    STA    SETOGL          ;INIT SOUND EFFECT TOGGLE
00027  0918  8D DF 0A    STA    ROTDIR          ;INIT ROTATION DIRECTION
00028  091B  78          SEI
00029  091C  AD 14 03    LDA    IRQVEC          ;GET CURRENT IRQ VECTOR
00030  091F  8D E5 0A    STA    NORIRQ          ;SET UP INDIRECT JUMP
00031  0922  AD 15 03    LDA    IRQVEC+1
00032  0925  8D E6 0A    STA    NORIRQ+1
00033  0928  A9 79       LDA    #<NEWIRQ        ;CHANGE IRQ VECTOR
00034  092A  8D 14 03    STA    IRQVEC
00035  092D  A9 09       LDA    #>NEWIRQ
00036  092F  8D 15 03    STA    IRQVEC+1
00037  0932  58          CLI
00038  0933  A2 00       LDX    #$00            ;PRINT MESSAGE
00039  0935  BD A3 0A    LOOP17 LDA TEXT,X
00040  0938  20 D2 FF    JSR    PRINT
00041  093B  E8          INX
00042  093C  E0 27       CPX    #$27
00043  093E  D0 F5       BNE    LOOP17
00044  0940  A9 00       LDA    #$00            ;BLACK
00045  0942  8D 21 D0    STA    VIC2+$21        ;SCREEN COLOR
00046  0945  A9 2C       LDA    #$2C            ;SPRITE #44
00047  0947  8D F8 07    STA    SPRPTR          ;TELL VIC2 WHERE SPRITE 0 IS
00048  094A  A9 A0       LDA    #$A0            ;X POSITION
00049  094C  8D 00 D0    STA    VIC2
00050  094F  A9 81       LDA    #$81            ;Y POSITION
00051  0951  8D 01 D0    STA    VIC2+1
00052  0954  A9 01       LDA    #$01
00053  0956  8D 1C D0    STA    VIC2+$1C        ;SET MULTI-COLOR MODE
00054  0959  A9 06       LDA    #$06            ;BLUE
00055  095B  8D 25 D0    STA    VIC2+$25        ;SET BIT PAIR 01
00056  095E  A9 01       LDA    #$01            ;WHITE
00057  0960  8D 26 D0    STA    VIC2+$26        ;SET BIT PAIR 11
00058  0963  A9 02       LDA    #$02            ;RED
00059  0965  8D 27 D0    STA    VIC2+$27        ;BIT PAIR 10
00060  0968  A9 01       LDA    #$01
00061  096A  8D 17 D0    STA    VIC2+$17        ;EXPAND Y 2X
00062  096D  8D 1D D0    STA    VIC2+$1D        ;EXPAND X 2X
00063  0970  8D 15 D0    STA    VIC2+$15        ;TURN SPRITE ON
00064  0973  A9 0F       LDA    #$0F
00065  0975  8D 18 D4    STA    SID+$18         ;TURN ON MASTER VOLUME
00066  0978  60          RTS
00067  0979              ;
00068  0979              ;ROTATE AND MOVE SPRITE
00069  0979              ;
00070  0979  AD E0 0A    NEWIRQ LDA XDIR        ;GET X DIRECTION 0=RIGHT ;1=LEFT
00071  097C  D0 2F       BNE    LOOP1
00072  097E  AD 10 D0    LDA    VIC2+$10        ;GET MSB X POS
00073  0981  D0 0F       BNE    LOOP3           ;SET?
00074  0983  AD 00 D0    LDA    VIC2            ;GET LSB X POS
00075  0986  C9 FF       CMP    #$FF            ;REACHED SPRITE SEEM?
00076  0988  D0 1D       BNE    LOOP2
00077  098A  A9 01       LDA    #$01
00078  098C  8D 10 D0    STA    VIC2+$10        ;SET MSB X POS
00079  098F  4C A7 09    JMP    LOOP2
00080  0992  AD 00 D0    LOOP3  LDA VIC2
00081  0995  C9 3C       CMP    #$3C            ;RIGHT EDGE OF SCREEN
00082  0997  D0 0E       BNE    LOOP2
00083  0999  A9 01       LDA    #$01
00084  099B  8D E0 0A    STA    XDIR            ;CHANGE DIRECTION
00085  099E  8D DF 0A    STA    ROTDIR          ;CHANGE ROTATION DIR
00086  09A1  20 81 0A    JSR    SOUND           ;SOUND EFFECT
00087  09A4  4C D7 09    JMP    LOOP4
00088  09A7  EE 00 D0    LOOP2  INC VIC2        ;MOVE RIGHT
00089  09AA  4C D7 09    JMP    LOOP4           ;MOVE Y DIR
00090  09AD  AD 10 D0    LOOP1  LDA VIC2+$10    ;GET MSB X POS
00091  09B0  F0 0D       BEQ    LOOP6           ;SET?
00092  09B2  AD 00 D0    LDA    VIC2            ;GET LSB X POS
00093  09B5  D0 1D       BNE    LOOP5           ;REACHED SPRITE SEEM?
00094  09B7  A9 00       LDA    #$00
00095  09B9  8D 10 D0    STA    VIC2+$10        ;SET MSB X POS
00096  09BC  4C D4 09    JMP    LOOP5
00097  09BF  AD 00 D0    LOOP6  LDA VIC2
00098  09C2  C9 08       CMP    #$08            ;LEFT EDGE OF SCREEN
00099  09C4  D0 0E       BNE    LOOP5
00100  09C6  A9 00       LDA    #$00
00101  09C8  8D E0 0A    STA    XDIR            ;CHANGE DIRECTION
00102  09CB  8D DF 0A    STA    ROTDIR          ;CHANGE ROTATION DIR
00103  09CE  20 81 0A    JSR    SOUND           ;SOUND EFFECT
00104  09D1  4C D7 09    JMP    LOOP4
00105  09D4  CE 00 D0    LOOP5  DEC VIC2        ;MOVE LEFT
00106  09D7  AD E1 0A    LOOP4  LDA YDIR        ;GET Y DIRECTION 0=DOWN ;1=UP
00107  09DA  D0 1B       BNE    LOOP7
00108  09DC  AD 01 D0    LDA    VIC2+1          ;GET Y POS
00109  09DF  C9 D6       CMP    #$D6            ;BOTTOM OF SCREEN
00110  09E1  D0 0E       BNE    LOOP8
00111  09E3  A9 01       LDA    #$01
00112  09E5  8D E1 0A    STA    YDIR
00113  09E8  8D DF 0A    STA    ROTDIR          ;CHANGE ROTATION DIR
00114  09EB  20 81 0A    JSR    SOUND           ;SOUND EFFECT
00115  09EE  4C 0F 0A    JMP    LOOP9
00116  09F1  EE 01 D0    LOOP8  INC VIC2+1      ;MOVE DOWN
00117  09F4  4C 0F 0A    JMP    LOOP9
00118  09F7  AD 01 D0    LOOP7  LDA VIC2+1      ;GET Y POS
00119  09FA  C9 2C       CMP    #$2C            ;TOP OF SCREEN
00120  09FC  D0 0E       BNE    LOOP10
00121  09FE  A9 00       LDA    #$00
00122  0A00  8D E1 0A    STA    YDIR
00123  0A03  8D DF 0A    STA    ROTDIR          ;CHANGE ROTATION DIR
00124  0A06  20 81 0A    JSR    SOUND           ;SOUND EFFECT
00125  0A09  4C 0F 0A    JMP    LOOP9
00126  0A0C  CE 01 D0    LOOP10 DEC VIC2+1      ;MOVE DOWN
00127  0A0F  CE DE 0A    LOOP9  DEC TIMER
00128  0A12  D0 53       BNE    LOOP11          ;TIMER = 0?
00129  0A14  A9 05       LDA    #$05
00130  0A16  8D DE 0A    STA    TIMER           ;RESET TIMER
00131  0A19  AD DF 0A    LDA    ROTDIR          ;GET ROTATION DIRECTION
00132  0A1C  D0 26       BNE    LOOP15          ;1= LEFT 0=RIGHT
00133  0A1E  AD F8 07    LDA    SPRPTR
00134  0A21  C9 3F       CMP    #$3F
00135  0A23  D0 0D       BNE    LOOP12          ;HAS SPRITE MADE FULL ROTATION?
00136  0A25  A9 00       LDA    #$00
00137  0A27  8D E4 0A    STA    COLOR           ;RESET COLOR COUNTER
00138  0A2A  A9 2C       LDA    #$2C
00139  0A2C  8D F8 07    STA    SPRPTR
00140  0A2F  4C 67 0A    JMP    LOOP11
00141  0A32  EE F8 07    LOOP12 INC SPRPTR      ;ROTATE 1 STEP RIGHT
00142  0A35  AE E4 0A    LDX    COLOR
00143  0A38  EE E4 0A    INC    COLOR
00144  0A3B  BD CA 0A    LDA    C1DATA,X
00145  0A3E  8D 26 D0    STA    VIC2+$26        ;COLOR REFLECTION
00146  0A41  4C 67 0A    JMP    LOOP11
00147  0A44  AD F8 07    LOOP15 LDA SPRPTR
00148  0A47  C9 2C       CMP    #$2C
00149  0A49  D0 0D       BNE    LOOP16          ;HAS SPRITE MADE FULL ROTATION?
00150  0A4B  A9 13       LDA    #$13
00151  0A4D  8D E4 0A    STA    COLOR           ;RESET COLOR COUNTER
00152  0A50  A9 3F       LDA    #$3F
00153  0A52  8D F8 07    STA    SPRPTR
00154  0A55  4C 67 0A    JMP    LOOP11
00155  0A58  CE F8 07    LOOP16 DEC SPRPTR      ;ROTATE 1 STEP LEFT
00156  0A5B  AE E4 0A    LDX    COLOR
00157  0A5E  CE E4 0A    DEC    COLOR
00158  0A61  BD CA 0A    LDA    C1DATA,X
00159  0A64  8D 26 D0    STA    VIC2+$26        ;COLOR REFLECTION
00160  0A67  AD E2 0A    LOOP11 LDA SETOGL
00161  0A6A  D0 03       BNE    LOOP13
00162  0A6C  6C E5 0A    JMP    (NORIRQ)        ;NORMAL IRQ PROCESSING
00163  0A6F  CE E3 0A    LOOP13 DEC STIMER
00164  0A72  D0 0A       BNE    LOOP14
00165  0A74  A9 80       LDA    #%10000000
00166  0A76  8D 04 D4    STA    SID+$04         ;START RELEASE
00167  0A79  A9 00       LDA    #$00
00168  0A7B  8D E2 0A    STA    SETOGL          ;RESET TOGGLE
00169  0A7E  6C E5 0A    LOOP14 JMP (NORIRQ)    ;NORMAL IRQ PROCESSING
00170  0A81              ;
00171  0A81              ;SOUND EFFECT
00172  0A81              ;
00173  0A81  A9 85       SOUND  LDA #$85
00174  0A83  8D 05 D4    STA    SID+$05         ;SET ATTACK/DECAY
00175  0A86  A9 75       LDA    #$75
00176  0A88  8D 06 D4    STA    SID+$06         ;SET SUSTAIN/RELEASE
00177  0A8B  A9 88       LDA    #$88
00178  0A8D  8D 00 D4    STA    SID             ;SET LO FREQ
00179  0A90  A9 03       LDA    #$03
00180  0A92  8D 01 D4    STA    SID+1           ;SET HI FREQ
00181  0A95  A9 81       LDA    #%10000001
00182  0A97  8D 04 D4    STA    SID+$04         ;SET RANDOM NOISE AND GATE BIT
00183  0A9A  A9 05       LDA    #$05
00184  0A9C  8D E3 0A    STA    STIMER          ;SET SUSTAIN TIMER
00185  0A9F  8D E2 0A    STA    SETOGL          ;SET SOUND EFFECT TOGGLE
00186  0AA2  60          RTS
00187  0AA3              ;
00188  0AA3              ;VARIABLES AND DATA
00189  0AA3              ;
00190  0AA3  0D          TEXT   .BYTE 13,05,'64 BOINK!'
00190  0AA4  05 
00190  0AA5  36 34 
00191  0AAE  0D          .BYTE  13,'BY STEVE GOLDSMITH'
00191  0AAF  42 59 
00192  0AC1  0D          .BYTE  13,'10/06/86'
00192  0AC2  31 30 
00193  0ACA  0B          C1DATA .BYTE 11,11,11,12,15,1,15,12,11,11,11,11,11,12,15,1,15,12,11,11
00193  0ACB  0B 
00193  0ACC  0B 
00193  0ACD  0C 
00193  0ACE  0F 
00193  0ACF  01 
00193  0AD0  0F 
00193  0AD1  0C 
00193  0AD2  0B 
00193  0AD3  0B 
00193  0AD4  0B 
00193  0AD5  0B 
00193  0AD6  0B 
00193  0AD7  0C 
00193  0AD8  0F 
00193  0AD9  01 
00193  0ADA  0F 
00193  0ADB  0C 
00193  0ADC  0B 
00193  0ADD  0B 
00194  0ADE  00          TIMER  .BYTE 0         ;ROTATION TIMER
00195  0ADF  00          ROTDIR .BYTE 0         ;ROTATION DIRECTION
00196  0AE0  00          XDIR   .BYTE 0         ;SPRITE X DIRECTION
00197  0AE1  00          YDIR   .BYTE 0         ;SPRITE Y DIRECTION
00198  0AE2  00          SETOGL .BYTE 0         ;SOUND EFFECT TOGGLE
00199  0AE3  00          STIMER .BYTE 0         ;SUSTAIN TIMER
00200  0AE4  00          COLOR  .BYTE 0         ;CURRENT REFLECTION COLOR
00201  0AE5  00          NORIRQ .BYTE 0,0       ;IRQ JUMP VECTOR
00201  0AE6  00 
00202  0AE7              .END

SYMBOL TABLE

SYMBOL VALUE
 C1DATA   0ACA    COLOR    0AE4    IRQVEC   0314    LOOP1    09AD
 LOOP10   0A0C    LOOP11   0A67    LOOP12   0A32    LOOP13   0A6F
 LOOP14   0A7E    LOOP15   0A44    LOOP16   0A58    LOOP17   0935
 LOOP2    09A7    LOOP3    0992    LOOP4    09D7    LOOP5    09D4
 LOOP6    09BF    LOOP7    09F7    LOOP8    09F1    LOOP9    0A0F
 NEWIRQ   0979    NORIRQ   0AE5    PRINT    FFD2    ROTDIR   0ADF
 SETOGL   0AE2    SID      D400    SOUND    0A81    SPRPTR   07F8
 STIMER   0AE3    TEXT     0AA3    TIMER    0ADE    VIC2     D000
 XDIR     0AE0    YDIR     0AE1   
